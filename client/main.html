<head>
    <title>Fusion Microservice</title>
</head>

<body>
    <h1>Fusion Microservice Worker</h1>
    <div>
        <h2>Manually send an API request</h2> {{> test_api}}
    </div>
    <div>
        <h2>API messages received in last 10s</h2> {{> monitor_api}}
    </div>
</body>

<template name="test_api">
    <div>
        <input type="text" id="data" placeholder="Enter JSON to send" size="40" />
    </div>
    <button id="send">Send JSON</button>
</template>

<template name="monitor_api">
    <div>
        <table>
            <thead>
                <th>Reception time</th>
                <th>Content</th>
            </thead>
            <tbody>
                {{ #each last_messages}}
                <tr>
                    <td> {{ time }} </td>
                    <td> {{ content }} </td>
                </tr>
                {{ /each}}
            </tbody>
        </table>
    </div>
</template>
