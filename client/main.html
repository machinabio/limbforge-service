<head>
    <title>Fusion Microservice</title>
</head>

<body>
    <h1>Fusion Microservice Worker</h1>
    <div>
        <h2>Manually send an API request</h2> {{> api_test}}
    </div>
    <div>
        <h2>API messages received in last 10 min</h2> {{> monitor_api}}
    </div>
</body>

<template name="api_test">
    <div>
        <textarea type="textarea" id="data" placeholder="Enter JSON to send" cols="60" rows="10">
        </textarea>
    </div>
    <button id="send">Send JSON</button>
    <div>
        <h3>Response:</h3> {{ response }}
        <!-- {{ #with response }} -->
    </div>
</template>

<template name="monitor_api">
    <div>
        <table>
            <thead>
                <th>Reception time</th>
                <th>Content</th>
            </thead>
            <tbody>
                {{ #each last_messages}}
                <tr>
                    <td> {{ time }} </td>
                    <td> {{ content }} </td>
                </tr>
                {{ /each}}
            </tbody>
        </table>
    </div>
</template>
